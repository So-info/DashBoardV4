<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La Plage – Dashboard</title>
  <meta name="theme-color" content="#e6f4ff" />
  <!-- Tailwind via CDN (mobile-first, no build step) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            skybrand: {
              50: '#f0f9ff', 100: '#e0f2ff', 200: '#bae6fd', 300: '#7dd3fc',
              400: '#38bdf8', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1',
              800: '#075985', 900: '#0c4a6e'
            }
          },
          boxShadow: { soft: '0 10px 25px -10px rgba(2, 132, 199, 0.25)' }
        }
      }
    }
  </script>
  <style>
    /* Mobile-first helpers */
    .card { @apply bg-white rounded-2xl shadow-soft p-4; }
    .btn  { @apply rounded-xl px-4 py-3 font-semibold active:scale-95 transition; }
    .btn-primary { @apply bg-skybrand-500 text-white; }
    .btn-outline { @apply border border-skybrand-500 text-skybrand-700; }
    .chip { @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium; }
    .chip.todo { @apply bg-skybrand-100 text-skybrand-800; }
    .chip.doing { @apply bg-yellow-100 text-yellow-800; }
    .chip.done { @apply bg-emerald-100 text-emerald-800; }
    .chip.lock { @apply bg-gray-100 text-gray-700; }
    .hide { display:none; }
  </style>
</head>
<body class="min-h-screen bg-skybrand-50 text-skybrand-900">
  <!-- Top bar -->
  <header class="sticky top-0 z-40 bg-skybrand-50/80 backdrop-blur border-b border-skybrand-100">
    <div class="max-w-xl mx-auto flex items-center justify-between p-3">
      <div class="flex items-center gap-3">
        <img src="logo-la-plage.png" alt="La Plage" class="h-8 w-8 rounded-full"/>
        <h1 class="text-lg font-extrabold tracking-tight">La Plage – Dashboard</h1>
      </div>
      <div id="userBadge" class="flex items-center gap-2 text-sm"></div>
    </div>
  </header>

  <!-- LOGIN PAGE (only Google button + logo + welcome message) -->
  <main id="page-login" class="max-w-xl mx-auto p-6 flex flex-col gap-6">
    <div class="card text-center">
      <img src="logo-la-plage.png" alt="La Plage" class="mx-auto h-20 w-20 mb-3"/>
      <h2 class="text-2xl font-bold">Bienvenue sur le dashboard du camping La Plage</h2>
      <p class="mt-2 text-skybrand-700">Accédez avec votre compte Google pour continuer.</p>
      <button id="btnGoogle" class="btn btn-primary mt-6 w-full flex items-center justify-center gap-3">
        <svg aria-hidden="true" viewBox="0 0 512 512" class="h-5 w-5"><path fill="currentColor" d="M272 208v96h133c-6 35-40 104-133 104-80 0-145-66-145-146s65-146 145-146c45 0 75 19 92 35l63-61C377 62 327 40 272 40 141 40 36 145 36 276s105 236 236 236c136 0 226-96 226-232 0-16-2-27-4-40H272z"/></svg>
        Continuer avec Google
      </button>
    </div>
  </main>

  <!-- APP SHELL (shown when authenticated) -->
  <section id="app" class="hide max-w-xl mx-auto p-4 pb-24">

    <!-- Role-aware tabs (only relevant tabs appear) -->
    <nav id="tabbar" class="fixed bottom-0 left-0 right-0 bg-white border-t border-skybrand-100">
      <div class="max-w-xl mx-auto grid grid-cols-4 gap-1 p-2 text-xs">
        <button data-tab="home" class="btn btn-outline">Accueil</button>
        <button data-tab="reception" class="btn btn-outline hide">Réception</button>
        <button data-tab="tech" class="btn btn-outline hide">Technique</button>
        <button data-tab="clean" class="btn btn-outline hide">Ménage</button>
        <button data-tab="inventory-tech" class="btn btn-outline hide">Invent. Tech</button>
        <button data-tab="inventory-clean" class="btn btn-outline hide">Invent. Ménage</button>
        <button data-tab="admin" class="btn btn-outline hide">Admin</button>
        <button id="btnSignOut" class="btn btn-primary">Quitter</button>
      </div>
    </nav>

    <!-- HOME / DASHBOARD -->
    <section id="tab-home" class="tab p-2 mt-2">
      <div class="card">
        <h2 class="text-xl font-bold">Tableau de bord</h2>
        <p class="mt-1 text-sm">Vous êtes connecté en tant que <span id="roleLabel" class="font-semibold"></span>.</p>
        <div class="mt-4 grid gap-3">
          <div class="card bg-skybrand-50">
            <h3 class="font-semibold">Interventions en cours (Technique)</h3>
            <ul id="dashTechList" class="mt-2 text-sm grid gap-2"></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- RÉCEPTION: créer des interventions (technique) -->
    <section id="tab-reception" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold mb-3">Nouvelle intervention (Technique)</h2>
        <form id="formReception" class="grid gap-3">
          <label class="grid gap-1">
            <span>N° Mobil-home</span>
            <input name="mh" required inputmode="numeric" class="w-full rounded-xl border p-3" placeholder="ex: 42" />
          </label>
          <label class="grid gap-1">
            <span>Détail de l'intervention</span>
            <textarea name="detail" class="w-full rounded-xl border p-3" placeholder="Décrivez le problème..."></textarea>
          </label>
          <div class="grid grid-cols-2 gap-3">
            <label class="flex items-center gap-2"><input type="checkbox" name="present"/> Clients présents</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="authorized"/> Autorisation d'entrée</label>
          </div>
          <button class="btn btn-primary w-full">Créer l'intervention</button>
        </form>
      </div>

      <div class="card mt-4">
        <h3 class="font-semibold">Toutes les interventions</h3>
        <ul id="receptionList" class="mt-2 grid gap-2"></ul>
      </div>
    </section>

    <!-- TECHNIQUE: voir & traiter interventions -->
    <section id="tab-tech" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold">Interventions</h2>
        <div class="flex gap-2 mt-2 text-sm">
          <button class="btn btn-outline" data-filter="all">Toutes</button>
          <button class="btn btn-outline" data-filter="todo">À faire</button>
          <button class="btn btn-outline" data-filter="doing">En cours</button>
          <button class="btn btn-outline" data-filter="done">Terminées</button>
        </div>
        <ul id="techList" class="mt-3 grid gap-3"></ul>
      </div>
    </section>

    <!-- MÉNAGE: placeholder pour éventuelles interventions ménage (lecture seule ici) -->
    <section id="tab-clean" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold">Informations ménage</h2>
        <p class="text-sm">Aucune intervention spécifique n'est requise ici pour l'instant.</p>
      </div>
    </section>

    <!-- INVENTAIRE TECHNIQUE -->
    <section id="tab-inventory-tech" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold">Inventaire – Technique</h2>
        <form id="formInvTech" class="mt-2 grid grid-cols-3 gap-2">
          <input name="name" class="col-span-2 rounded-xl border p-3" placeholder="Nom de l'objet"/>
          <input name="qty" type="number" value="1" class="rounded-xl border p-3"/>
          <button class="btn btn-primary col-span-3">Ajouter</button>
        </form>
        <ul id="listInvTech" class="mt-3 grid gap-2"></ul>
      </div>
    </section>

    <!-- INVENTAIRE MÉNAGE -->
    <section id="tab-inventory-clean" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold">Inventaire – Ménage</h2>
        <form id="formInvClean" class="mt-2 grid grid-cols-3 gap-2">
          <input name="name" class="col-span-2 rounded-xl border p-3" placeholder="Nom de l'objet"/>
          <input name="qty" type="number" value="1" class="rounded-xl border p-3"/>
          <button class="btn btn-primary col-span-3">Ajouter</button>
        </form>
        <ul id="listInvClean" class="mt-3 grid gap-2"></ul>
      </div>
    </section>

    <!-- ADMIN: gestion des comptes & rôles -->
    <section id="tab-admin" class="tab hide p-2">
      <div class="card">
        <h2 class="text-lg font-bold">Administration – Comptes & rôles</h2>
        <p class="text-sm">Attribuez un rôle aux salariés déjà connectés au moins une fois.</p>
        <ul id="usersList" class="mt-3 grid gap-2"></ul>
      </div>
    </section>

  </section>

  <!-- Firebase + App Logic -->
  <script type="module">
    // --- Config (fourni par vous)
    const firebaseConfig = {
      apiKey: "AIzaSyDEVzQfz8loSf2HDzU_YcBvIgH1Fx9_fnw",
      authDomain: "dashboard-v4-2ef47.firebaseapp.com",
      projectId: "dashboard-v4-2ef47",
      storageBucket: "dashboard-v4-2ef47.firebasestorage.app",
      messagingSenderId: "179267988381",
      appId: "1:179267988381:web:644c3a2dc713ed9bca1d74"
    };

    // Import Firebase (v10+ modular)
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
    import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, addDoc, collection, query, where, orderBy, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    // Init
    const appFb = initializeApp(firebaseConfig);
    const auth = getAuth(appFb);
    const db = getFirestore(appFb);

    // UI helpers
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const show = el => el.classList.remove('hide');
    const hide = el => el.classList.add('hide');

    // Pages / tabs
    const pageLogin = $('#page-login');
    const app = $('#app');
    const userBadge = $('#userBadge');

    const roleTabs = {
      reception: $('[data-tab="reception"]'),
      tech: $('[data-tab="tech"]'),
      clean: $('[data-tab="clean"]'),
      invTech: $('[data-tab="inventory-tech"]'),
      invClean: $('[data-tab="inventory-clean"]'),
      admin: $('[data-tab="admin"]')
    };

    function switchTab(id){
      $$('.tab').forEach(t => hide(t));
      $(`#tab-${id}`).classList.remove('hide');
      // Persist current tab
      localStorage.setItem('lp_tab', id);
    }

    // Tabbar click
    $('#tabbar').addEventListener('click', (e)=>{
      const b = e.target.closest('button[data-tab]');
      if(!b) return;
      switchTab(b.dataset.tab);
    });

    // Login
    $('#btnGoogle').addEventListener('click', async ()=>{
      const provider = new GoogleAuthProvider();
      try {
        await signInWithPopup(auth, provider);
      } catch (err) {
        alert('Connexion Google refusée.');
        console.error(err);
      }
    });

    // Sign out
    $('#btnSignOut').addEventListener('click', ()=> signOut(auth));

    // Current user state + role loading
    let unsubIntervReception = null;
    let unsubIntervTech = null;
    let unsubDashTech = null;
    let unsubUsers = null;

    const ROLES = ['admin','reception','tech','clean'];

    onAuthStateChanged(auth, async (user)=>{
      if(!user){
        // Logged out
        show(pageLogin); hide(app);
        userBadge.innerHTML = '';
        return;
      }

      // First login: create profile doc if missing
      const uref = doc(db, 'users', user.uid);
      const snap = await getDoc(uref);
      if(!snap.exists()){
        await setDoc(uref, {
          email: user.email || null,
          displayName: user.displayName || null,
          photoURL: user.photoURL || null,
          role: 'reception', // rôle par défaut minimal
          createdAt: serverTimestamp()
        });
      }

      // Read role
      const role = (await getDoc(uref)).data().role || 'reception';

      // UI toggle
      hide(pageLogin); show(app);
      userBadge.innerHTML = `
        <img src="${user.photoURL || ''}" class="h-6 w-6 rounded-full" alt=""/>
        <span class="hidden sm:inline">${user.displayName || user.email}</span>
      `;
      $('#roleLabel').textContent = role;

      // Show tabs by role
      Object.values(roleTabs).forEach(hide);
      // Everyone gets Home and Sign out; role-specific below
      if(role==='admin'){
        show(roleTabs.reception); show(roleTabs.tech); show(roleTabs.clean);
        show(roleTabs.invTech); show(roleTabs.invClean); show(roleTabs.admin);
      } else if(role==='reception'){
        show(roleTabs.reception); show(roleTabs.invTech); show(roleTabs.invClean);
      } else if(role==='tech'){
        show(roleTabs.tech); show(roleTabs.invTech);
      } else if(role==='clean'){
        show(roleTabs.clean); show(roleTabs.invClean);
      }

      // Restore last tab (or default)
      const last = localStorage.getItem('lp_tab') || (role==='reception'?'reception':role==='tech'?'tech':role==='admin'?'admin':'home');
      switchTab(last);

      // Live dashboard (tech in-progress)
      if(unsubDashTech) unsubDashTech();
      unsubDashTech = onSnapshot(query(collection(db,'interventions'), where('type','==','tech'), where('locked','==', false)), (qs)=>{
        const ul = $('#dashTechList'); ul.innerHTML='';
        qs.forEach(docu=>{
          const it = docu.data();
          const li = document.createElement('li');
          li.className = 'flex items-center justify-between gap-2 rounded-xl border p-3 bg-white';
          li.innerHTML = `
            <div>
              <div class="font-semibold">MH ${it.mh} – ${it.detail || ''}</div>
              <div class="text-xs opacity-80">Présents: ${it.present? 'oui':'non'} · Entrée: ${it.authorized? 'oui':'non'}</div>
            </div>
            <span class="chip ${it.status==='todo'?'todo':it.status==='doing'?'doing':'done'}">
              ${it.status==='todo'?'À faire':it.status==='doing'?'En cours':'Terminée'}
            </span>`;
          ul.appendChild(li);
        });
      });

      // Wire pages depending on role
      wireReception(role);
      wireTech(role, user);
      wireAdmin(role, user);
      wireInventories(role);
    });

    // ===== Reception logic =====
    function wireReception(role){
      if(role!=='reception' && role!=='admin') return;

      const form = $('#formReception');
      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fd = new FormData(form);
        const payload = {
          type: 'tech',
          mh: (fd.get('mh')||'').toString().trim(),
          detail: (fd.get('detail')||'').toString().trim(),
          present: !!fd.get('present'),
          authorized: !!fd.get('authorized'),
          status: 'todo',
          locked: false,
          createdAt: serverTimestamp()
        };
        if(!payload.mh){ alert('Numéro de mobil-home requis'); return; }
        await addDoc(collection(db,'interventions'), payload);
        form.reset();
      });

      // List all interventions (for reception)
      if(unsubIntervReception) unsubIntervReception();
      unsubIntervReception = onSnapshot(query(collection(db,'interventions'), orderBy('createdAt','desc')), (qs)=>{
        const ul = $('#receptionList'); ul.innerHTML='';
        qs.forEach(docu=>{
          const it = {id: docu.id, ...docu.data()};
          const li = document.createElement('li');
          li.className = 'rounded-xl border p-3 bg-white';
          li.innerHTML = `
            <div class="flex items-center justify-between">
              <div class="font-semibold">MH ${it.mh} – ${it.detail || ''}</div>
              <span class="chip ${it.locked?'lock':it.status==='todo'?'todo':it.status==='doing'?'doing':'done'}">
                ${it.locked?'Validée': it.status==='todo'?'À faire':it.status==='doing'?'En cours':'Terminée'}
              </span>
            </div>
            <div class="mt-1 text-xs opacity-80">Clients présents: ${it.present? 'oui':'non'} · Autorisation: ${it.authorized? 'oui':'non'}</div>
            ${it.locked && it.validatedByName ? `<div class='mt-1 text-xs'>Validée par <b>${it.validatedByName}</b></div>`:''}
          `;
          ul.appendChild(li);
        });
      });
    }

    // ===== Technique logic =====
    function wireTech(role, user){
      if(role!=='tech' && role!=='admin') return;

      const ul = $('#techList');
      let currentFilter = 'all';
      $('#tab-tech').addEventListener('click', (e)=>{
        const b = e.target.closest('button[data-filter]');
        if(b){ currentFilter = b.dataset.filter; render(); }
      });

      let items = [];
      if(unsubIntervTech) unsubIntervTech();
      unsubIntervTech = onSnapshot(query(collection(db,'interventions'), where('type','==','tech'), orderBy('createdAt','desc')), (qs)=>{
        items = qs.docs.map(d=>({ id:d.id, ...d.data() }));
        render();
      });

      function render(){
        ul.innerHTML='';
        items
          .filter(it=> currentFilter==='all' ? true : currentFilter==='done' ? it.status==='done' : currentFilter==='doing' ? it.status==='doing' : it.status==='todo')
          .forEach(it=>{
            const li = document.createElement('li');
            li.className = 'card';
            li.innerHTML = `
              <div class="flex items-center justify-between">
                <div>
                  <div class="font-semibold">MH ${it.mh}</div>
                  <div class="text-sm opacity-80">${it.detail || ''}</div>
                  <div class="text-xs mt-1 opacity-80">Présents: ${it.present?'oui':'non'} · Entrée: ${it.authorized?'oui':'non'}</div>
                </div>
                <div>
                  <span class="chip ${it.locked?'lock':it.status==='todo'?'todo':it.status==='doing'?'doing':'done'}">
                    ${it.locked?'Validée': it.status==='todo'?'À faire':it.status==='doing'?'En cours':'Terminée'}
                  </span>
                </div>
              </div>
              <div class="mt-3 grid grid-cols-3 gap-2">
                <button class="btn btn-outline" data-act="status" data-to="todo" ${it.locked?'disabled':''}>À faire</button>
                <button class="btn btn-outline" data-act="status" data-to="doing" ${it.locked?'disabled':''}>En cours</button>
                <button class="btn btn-outline" data-act="status" data-to="done" ${it.locked?'disabled':''}>Terminée</button>
                <button class="btn btn-primary col-span-3" data-act="validate" ${it.locked?'disabled':''}>Valider l'intervention</button>
              </div>
            `;

            li.addEventListener('click', async (e)=>{
              const b = e.target.closest('button[data-act]'); if(!b) return;
              if(b.dataset.act==='status'){
                if(it.locked) return;
                await updateDoc(doc(db,'interventions', it.id), { status: b.dataset.to });
              }
              if(b.dataset.act==='validate'){
                if(it.locked) return;
                await updateDoc(doc(db,'interventions', it.id), {
                  locked: true,
                  validatedBy: user.uid,
                  validatedByName: auth.currentUser?.displayName || auth.currentUser?.email || 'tech',
                  validatedAt: serverTimestamp()
                });
              }
            });

            ul.appendChild(li);
          });
      }
    }

    // ===== Admin logic =====
    function wireAdmin(role, user){
      if(role!=='admin') return;
      const ul = $('#usersList');
      if(unsubUsers) unsubUsers();
      unsubUsers = onSnapshot(query(collection(db,'users'), orderBy('createdAt','desc')), (qs)=>{
        ul.innerHTML='';
        qs.forEach(d=>{
          const u = { id: d.id, ...d.data() };
          const li = document.createElement('li');
          li.className = 'rounded-xl border p-3 bg-white flex items-center gap-3 justify-between';
          li.innerHTML = `
            <div class="flex items-center gap-3">
              <img src="${u.photoURL||''}" class="h-8 w-8 rounded-full" alt=""/>
              <div>
                <div class="font-semibold">${u.displayName||u.email||u.id}</div>
                <div class="text-xs opacity-80">${u.email||''}</div>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <select class="rounded-xl border p-2" data-uid="${u.id}">
                ${ROLES.map(r=>`<option value="${r}" ${u.role===r?'selected':''}>${r}</option>`).join('')}
              </select>
              <button class="btn btn-primary" data-save="${u.id}">Enregistrer</button>
            </div>
          `;
          li.addEventListener('click', async (e)=>{
            const s = e.target.closest('button[data-save]'); if(!s) return;
            const uid = s.dataset.save;
            const newRole = li.querySelector('select').value;
            await updateDoc(doc(db,'users', uid), { role: newRole });
          });
          ul.appendChild(li);
        });
      });
    }

    // ===== Inventory logic =====
    function wireInventories(role){
      // Inventory – Tech
      if(role==='tech' || role==='admin' || role==='reception'){
        setupInventory('tech', '#formInvTech', '#listInvTech');
      }
      // Inventory – Clean
      if(role==='clean' || role==='admin' || role==='reception'){
        setupInventory('clean', '#formInvClean', '#listInvClean');
      }

      function setupInventory(kind, formSel, listSel){
        const form = document.querySelector(formSel);
        const list = document.querySelector(listSel);
        form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const fd = new FormData(form);
          const name = (fd.get('name')||'').toString().trim();
          let qty = parseInt(fd.get('qty')||'1', 10) || 1;
          if(!name) return;
          await addDoc(collection(db, `inventory_${kind}`), { name, qty, createdAt: serverTimestamp() });
          form.reset();
        });
        onSnapshot(query(collection(db, `inventory_${kind}`), orderBy('createdAt','desc')), (qs)=>{
          list.innerHTML='';
          qs.forEach(d=>{
            const it = { id:d.id, ...d.data() };
            const li = document.createElement('li');
            li.className = 'rounded-xl border p-3 bg-white flex items-center justify-between gap-2';
            li.innerHTML = `
              <div class="font-semibold">${it.name}</div>
              <div class="flex items-center gap-2">
                <button class="btn btn-outline" data-act="dec">−1</button>
                <span class="w-8 text-center">${it.qty}</span>
                <button class="btn btn-outline" data-act="inc">+1</button>
                <button class="btn btn-primary" data-act="del">Supprimer</button>
              </div>
            `;
            li.addEventListener('click', async (e)=>{
              const b = e.target.closest('button[data-act]'); if(!b) return;
              const ref = doc(db, `inventory_${kind}`, it.id);
              if(b.dataset.act==='inc') await updateDoc(ref, { qty: (it.qty||0)+1 });
              if(b.dataset.act==='dec') await updateDoc(ref, { qty: Math.max(0, (it.qty||0)-1) });
              if(b.dataset.act==='del') await updateDoc(ref, { qty: -1 }).then(()=>{ /* flag for cleanup */ });
            });
            list.appendChild(li);
          });
        });
      }
    }

    // ===== Simple client-side guard (visual) for locked interventions =====
    // Firestore Security Rules (à coller dans la console Firebase > Firestore > Règles)
    /*
    rules_version = '2';
    service cloud.firestore {
      match /databases/{database}/documents {
        function isSignedIn() { return request.auth != null; }
        function isAdmin() { return isSignedIn() && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin'; }
        function hasRole(r) { return isSignedIn() && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == r; }

        match /users/{uid} {
          allow read: if isAdmin();
          allow write: if isAdmin(); // seul l'admin gère les rôles
          allow create: if isSignedIn();
          allow get: if isSignedIn() && request.auth.uid == uid || isAdmin();
        }

        match /interventions/{id} {
          allow read: if isSignedIn();
          // Création par réception/admin
          allow create: if hasRole('reception') || isAdmin();
          // MAJ par technique tant que non verrouillée
          allow update: if (
            (hasRole('tech') && resource.data.type == 'tech' && !resource.data.locked)
          ) || isAdmin();
        }

        match /inventory_tech/{id} {
          allow read: if isSignedIn();
          allow write: if hasRole('tech') || hasRole('reception') || isAdmin();
        }
        match /inventory_clean/{id} {
          allow read: if isSignedIn();
          allow write: if hasRole('clean') || hasRole('reception') || isAdmin();
        }
      }
    }
    */
  </script>
</body>
</html>
